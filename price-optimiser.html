<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Car Price Optimiser | Flipkart 2.0</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/feather-icons"></script>
</head>
<body class="font-sans bg-dark">
    <custom-navbar></custom-navbar>

    <main class="pt-20 pb-16">
        <!-- Price Optimiser Hero -->
        <section class="relative h-64 bg-gradient-to-br from-primary/10 to-accent/10 overflow-hidden">
            <div class="absolute inset-0 z-0">
                <div class="absolute inset-0 bg-[url('http://static.photos/automotive/1200x630/5')] bg-cover bg-center opacity-20 mix-blend-overlay"></div>
                <div class="absolute inset-0 bg-gradient-to-t from-dark/80 via-transparent to-transparent"></div>
            </div>
            <div class="container mx-auto px-6 h-full flex flex-col justify-center relative z-10">
                <div class="max-w-3xl text-center">
                    <h1 class="text-3xl md:text-4xl lg:text-5xl font-bold text-white mb-4">
                        <span class="text-transparent bg-clip-text bg-gradient-to-r from-primary to-accent">Car Price Optimiser</span>
                    </h1>
                    <p class="text-lg text-white/80">
                        Get the best deal with our AI-powered price optimization tool
                    </p>
                </div>
            </div>
        </section>

        <!-- Price Optimiser Form -->
        <section class="py-12 bg-slate-800">
            <div class="container mx-auto px-6 max-w-4xl">
                <div class="bg-slate-700 p-8 rounded-xl shadow-lg">
                    <h2 class="text-2xl font-bold text-white mb-6">Find the Optimal Price</h2>
                    
                    <form id="priceOptimiserForm" class="space-y-6">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label class="block text-sm font-medium text-white/80 mb-2">Car Make</label>
                                <select id="carMake" class="w-full bg-slate-600 border border-slate-500 text-white rounded-lg px-4 py-3" required>
                                    <option value="">Select Make</option>
                                    <option>Maruti Suzuki</option>
                                    <option>Hyundai</option>
                                    <option>Tata</option>
                                    <option>Mahindra</option>
                                    <option>Honda</option>
                                    <option>Toyota</option>
                                    <option>Kia</option>
                                    <option>Volkswagen</option>
                                    <option>Skoda</option>
                                    <option>Renault</option>
                                </select>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-white/80 mb-2">Car Model</label>
                                <select id="carModel" class="w-full bg-slate-600 border border-slate-500 text-white rounded-lg px-4 py-3" disabled required>
                                    <option value="">Select Model</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                            <div>
                                <label class="block text-sm font-medium text-white/80 mb-2">Year</label>
                                <select id="carYear" class="w-full bg-slate-600 border border-slate-500 text-white rounded-lg px-4 py-3" required>
                                    <option value="">Select Year</option>
                                    <option>2023</option>
                                    <option>2022</option>
                                    <option>2021</option>
                                    <option>2020</option>
                                    <option>2019</option>
                                    <option>2018</option>
                                </select>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-white/80 mb-2">Kilometers Driven</label>
                                <input type="number" id="carKm" class="w-full bg-slate-600 border border-slate-500 text-white rounded-lg px-4 py-3" placeholder="e.g. 15000" required>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-white/80 mb-2">Fuel Type</label>
                                <select id="carFuel" class="w-full bg-slate-600 border border-slate-500 text-white rounded-lg px-4 py-3" required>
                                    <option value="">Select Fuel</option>
                                    <option>Petrol</option>
                                    <option>Diesel</option>
                                    <option>CNG</option>
                                    <option>Electric</option>
                                    <option>Hybrid</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label class="block text-sm font-medium text-white/80 mb-2">Transmission</label>
                                <select id="carTransmission" class="w-full bg-slate-600 border border-slate-500 text-white rounded-lg px-4 py-3" required>
                                    <option value="">Select Transmission</option>
                                    <option>Automatic</option>
                                    <option>Manual</option>
                                    <option>AMT</option>
                                    <option>CVT</option>
                                </select>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-white/80 mb-2">Your Budget (₹)</label>
                                <input type="number" id="carBudget" class="w-full bg-slate-600 border border-slate-500 text-white rounded-lg px-4 py-3" placeholder="e.g. 500000" required>
                            </div>
                        </div>
                        
                        <div class="pt-2">
                            <button type="submit" class="w-full bg-gradient-to-r from-primary to-accent text-white font-medium py-3 px-6 rounded-lg hover:shadow-xl transition-all transform hover:-translate-y-1 flex items-center justify-center gap-2">
                                <i data-feather="zap"></i>
                                Optimise Price
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </section>

        <!-- Results Section -->
        <section id="resultsSection" class="py-12 hidden">
            <div class="container mx-auto px-6 max-w-6xl">
                <div class="bg-gradient-to-br from-slate-800 to-slate-900 p-8 rounded-xl shadow-lg border border-slate-700">
                    <div class="flex flex-col md:flex-row items-start md:items-center justify-between mb-8">
                        <div>
                            <h2 class="text-2xl font-bold text-white mb-2">Optimized Price Results</h2>
                            <p class="text-gray-400" id="resultSummary">For <span id="carDetails" class="text-primary"></span></p>
                        </div>
                        <button id="saveResultBtn" class="mt-4 md:mt-0 px-6 py-2 bg-primary/10 text-primary border border-primary rounded-lg hover:bg-primary hover:text-white transition-colors flex items-center gap-2">
                            <i data-feather="save"></i>
                            Save Result
                        </button>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                        <!-- Market Price -->
                        <div class="bg-slate-700 p-6 rounded-lg border border-slate-600">
                            <div class="flex items-center gap-4 mb-4">
                                <div class="w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center">
                                    <i data-feather="dollar-sign" class="text-primary"></i>
                                </div>
                                <h3 class="font-semibold text-white">Market Price</h3>
                            </div>
                            <p class="text-3xl font-bold text-white mb-2" id="marketPrice">₹--,--,---</p>
                            <p class="text-gray-400 text-sm">Average selling price for similar cars</p>
                        </div>
                        
                        <!-- Optimized Price -->
                        <div class="bg-slate-700 p-6 rounded-lg border border-primary/30">
                            <div class="flex items-center gap-4 mb-4">
                                <div class="w-12 h-12 rounded-full bg-primary/20 flex items-center justify-center">
                                    <i data-feather="zap" class="text-primary"></i>
                                </div>
                                <h3 class="font-semibold text-white">Optimized Price</h3>
                            </div>
                            <p class="text-3xl font-bold text-primary mb-2" id="optimizedPrice">₹--,--,---</p>
                            <p class="text-gray-400 text-sm">Our AI recommended price</p>
                        </div>
                        
                        <!-- Savings -->
                        <div class="bg-slate-700 p-6 rounded-lg border border-slate-600">
                            <div class="flex items-center gap-4 mb-4">
                                <div class="w-12 h-12 rounded-full bg-green-500/10 flex items-center justify-center">
                                    <i data-feather="trending-up" class="text-green-500"></i>
                                </div>
                                <h3 class="font-semibold text-white">Potential Savings</h3>
                            </div>
                            <p class="text-3xl font-bold text-green-500 mb-2" id="savings">₹--,--,---</p>
                            <p class="text-gray-400 text-sm">Compared to average market price</p>
                        </div>
                    </div>
                    
                    <!-- Price Trend -->
                    <div class="bg-slate-700 p-6 rounded-lg border border-slate-600 mb-8">
                        <div class="flex items-center justify-between mb-6">
                            <h3 class="font-semibold text-white">Price Trend Analysis</h3>
                            <div class="flex items-center gap-2">
                                <span class="text-xs bg-slate-600 px-2 py-1 rounded">6 Months</span>
                                <span class="text-xs bg-primary text-white px-2 py-1 rounded">1 Year</span>
                                <span class="text-xs bg-slate-600 px-2 py-1 rounded">2 Years</span>
                            </div>
                        </div>
                        <div class="h-64 bg-slate-800 rounded-lg flex items-center justify-center">
                            <div class="text-center">
                                <i data-feather="bar-chart-2" class="w-12 h-12 mx-auto text-gray-500 mb-2"></i>
                                <p class="text-gray-500">Price trend visualization</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Negotiation Tips -->
                    <div>
                        <h3 class="font-semibold text-white mb-4">Negotiation Strategy</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div class="bg-slate-700 p-4 rounded-lg border border-slate-600">
                                <div class="flex items-start gap-3">
                                    <div class="flex-shrink-0 mt-1">
                                        <div class="w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center">
                                            <i data-feather="dollar-sign" class="w-4 h-4 text-primary"></i>
                                        </div>
                                    </div>
                                    <div>
                                        <h4 class="font-medium text-white mb-1">Initial Offer</h4>
                                        <p class="text-gray-400 text-sm" id="initialOffer">Start at ₹--,--,--- (--% below market)</p>
                                    </div>
                                </div>
                            </div>
                            <div class="bg-slate-700 p-4 rounded-lg border border-slate-600">
                                <div class="flex items-start gap-3">
                                    <div class="flex-shrink-0 mt-1">
                                        <div class="w-8 h-8 rounded-full bg-green-500/10 flex items-center justify-center">
                                            <i data-feather="target" class="w-4 h-4 text-green-500"></i>
                                        </div>
                                    </div>
                                    <div>
                                        <h4 class="font-medium text-white mb-1">Target Price</h4>
                                        <p class="text-gray-400 text-sm" id="targetPrice">Aim for ₹--,--,--- (--% below market)</p>
                                    </div>
                                </div>
                            </div>
                            <div class="bg-slate-700 p-4 rounded-lg border border-slate-600">
                                <div class="flex items-start gap-3">
                                    <div class="flex-shrink-0 mt-1">
                                        <div class="w-8 h-8 rounded-full bg-yellow-500/10 flex items-center justify-center">
                                            <i data-feather="alert-circle" class="w-4 h-4 text-yellow-500"></i>
                                        </div>
                                    </div>
                                    <div>
                                        <h4 class="font-medium text-white mb-1">Red Flags</h4>
                                        <p class="text-gray-400 text-sm">Watch for excessive wear on <span id="redFlagParts">tyres, brakes, clutch</span></p>
                                    </div>
                                </div>
                            </div>
                            <div class="bg-slate-700 p-4 rounded-lg border border-slate-600">
                                <div class="flex items-start gap-3">
                                    <div class="flex-shrink-0 mt-1">
                                        <div class="w-8 h-8 rounded-full bg-blue-500/10 flex items-center justify-center">
                                            <i data-feather="check-circle" class="w-4 h-4 text-blue-500"></i>
                                        </div>
                                    </div>
                                    <div>
                                        <h4 class="font-medium text-white mb-1">Inspection Points</h4>
                                        <p class="text-gray-400 text-sm">Check <span id="inspectionPoints">engine oil, service history, accident marks</span></p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <custom-footer></custom-footer>

    <script src="components/navbar.js"></script>
    <script src="components/footer.js"></script>
    <script src="script.js"></script>
    <script>
        feather.replace();
        
        // Car model data
        const carModels = {
            'Maruti Suzuki': ['Swift', 'Baleno', 'Dzire', 'Wagon R', 'Brezza', 'Ertiga', 'Ciaz', 'Alto', 'S-Presso', 'Ignis'],
            'Hyundai': ['i20', 'Verna', 'Creta', 'Venue', 'Aura', 'Alcazar', 'Grand i10 Nios', 'Santro', 'Tucson', 'Kona'],
            'Tata': ['Nexon', 'Harrier', 'Safari', 'Altroz', 'Tiago', 'Tigor', 'Punch', 'Nexon EV', 'Tiago EV'],
            'Mahindra': ['Thar', 'Scorpio', 'XUV700', 'XUV300', 'Bolero', 'Marazzo', 'Alturas', 'KUV100', 'TUV300'],
            'Honda': ['City', 'Amaze', 'Jazz', 'WR-V', 'CR-V', 'Civic'],
            'Toyota': ['Innova', 'Fortuner', 'Glanza', 'Urban Cruiser', 'Camry', 'Vellfire'],
            'Kia': ['Seltos', 'Sonet', 'Carens', 'Carnival'],
            'Volkswagen': ['Polo', 'Vento', 'Taigun', 'Tiguan'],
            'Skoda': ['Kushaq', 'Slavia', 'Octavia', 'Superb'],
            'Renault': ['Kwid', 'Triber', 'Kiger']
        };

        // DOM elements
        const carMakeSelect = document.getElementById('carMake');
        const carModelSelect = document.getElementById('carModel');
        const priceOptimiserForm = document.getElementById('priceOptimiserForm');
        const resultsSection = document.getElementById('resultsSection');
        
        // Enable model selection when make is selected
        carMakeSelect.addEventListener('change', function() {
            if (this.value) {
                carModelSelect.disabled = false;
                carModelSelect.innerHTML = '<option value="">Select Model</option>';
                
                carModels[this.value].forEach(model => {
                    const option = document.createElement('option');
                    option.value = model;
                    option.textContent = model;
                    carModelSelect.appendChild(option);
                });
            } else {
                carModelSelect.disabled = true;
                carModelSelect.innerHTML = '<option value="">Select Model</option>';
            }
        });

        // Form submission
        priceOptimiserForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            // Get form values
            const make = carMakeSelect.value;
            const model = carModelSelect.value;
            const year = document.getElementById('carYear').value;
            const km = document.getElementById('carKm').value;
            const fuel = document.getElementById('carFuel').value;
            const transmission = document.getElementById('carTransmission').value;
            const budget = document.getElementById('carBudget').value;
            
            // Simulate price optimization (in a real app, this would be an API call)
            const basePrice = getBasePrice(make, model, year);
            const kmAdjustment = getKmAdjustment(km);
            const fuelAdjustment = getFuelAdjustment(fuel);
            const transmissionAdjustment = getTransmissionAdjustment(transmission);
            
            const marketPrice = basePrice * kmAdjustment * fuelAdjustment * transmissionAdjustment;
            const optimizedPrice = marketPrice * 0.92; // 8% below market
            const savings = marketPrice - optimizedPrice;
            
            // Update results
            document.getElementById('carDetails').textContent = `${year} ${make} ${model} (${km} km, ${fuel}, ${transmission})`;
            document.getElementById('marketPrice').textContent = formatPrice(marketPrice);
            document.getElementById('optimizedPrice').textContent = formatPrice(optimizedPrice);
            document.getElementById('savings').textContent = formatPrice(savings);
            
            // Update negotiation tips
            const initialOffer = optimizedPrice * 0.95; // 5% below optimized
            const targetPrice = optimizedPrice;
            const initialPercent = Math.round(((marketPrice - initialOffer) / marketPrice) * 100);
            const targetPercent = Math.round(((marketPrice - targetPrice) / marketPrice) * 100);
            
            document.getElementById('initialOffer').textContent = `Start at ${formatPrice(initialOffer)} (${initialPercent}% below market)`;
            document.getElementById('targetPrice').textContent = `Aim for ${formatPrice(targetPrice)} (${targetPercent}% below market)`;
            
            // Show results
            resultsSection.classList.remove('hidden');
            resultsSection.scrollIntoView({ behavior: 'smooth' });
        });

        // Price calculation helpers
        function getBasePrice(make, model, year) {
            // Simplified base prices (in a real app, this would come from an API)
            const makes = {
                'Maruti Suzuki': 600000,
                'Hyundai': 800000,
                'Tata': 700000,
                'Mahindra': 900000,
                'Honda': 850000,
                'Toyota': 1200000,
                'Kia': 950000,
                'Volkswagen': 850000,
                'Skoda': 950000,
                'Renault': 550000
            };
            
            const modelFactors = {
                'Swift': 1.0, 'Baleno': 1.2, 'Dzire': 1.1, 'i20': 1.3, 'Verna': 1.5, 
                'Creta': 1.8, 'Nexon': 1.4, 'Harrier': 2.0, 'Thar': 1.9, 'Scorpio': 2.1,
                'City': 1.6, 'Innova': 2.5, 'Fortuner': 3.0, 'Seltos': 1.7, 'Polo': 1.2
            };
            
            const base = makes[make] || 700000;
            const factor = modelFactors[model] || 1.0;
            const yearFactor = 1 + (0.05 * (2023 - parseInt(year))); // 5% depreciation per year
            
            return base * factor * yearFactor;
        }

        function getKmAdjustment(km) {
            const kmNum = parseInt(km);
            if (kmNum < 10000) return 1.0;
            if (kmNum < 30000) return 0.95;
            if (kmNum < 50000) return 0.9;
            if (kmNum < 80000) return 0.85;
            return 0.8;
        }

        function getFuelAdjustment(fuel) {
            switch(fuel) {
                case 'Diesel': return 1.1;
                case 'Petrol': return 1.0;
                case 'CNG': return 0.9;
                case 'Electric': return 1.2;
                case 'Hybrid': return 1.15;
                default: return 1.0;
            }
        }

        function getTransmissionAdjustment(transmission) {
            switch(transmission) {
                case 'Automatic': return 1.15;
                case 'Manual': return 1.0;
                case 'AMT': return 1.05;
                case 'CVT': return 1.1;
                default: return 1.0;
            }
        }

        function formatPrice(price) {
            return '₹' + Math.round(price).toLocaleString('en-IN');
        }

        // Save result button
        document.getElementById('saveResultBtn').addEventListener('click', function() {
            alert('Optimization result saved to your account!');
        });
    </script>
</body>
</html>